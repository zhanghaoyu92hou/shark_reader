layui.config({base:"/static/layadmin/lay_extend/tree/"}).use(["jquery","layer","table","treetable"],function(){var f=layui.jquery,b=layui.layer,d=layui.table,c=layui.treetable;function e(){layLoad("数据加载中...");c.render({treeColIndex:0,treeSpid:"0",treeIdName:"id",treePidName:"pid",treeDefaultClose:true,treeLinkage:false,elem:"#table-block",url:window.location.href,page:false,height:"full-220",id:"table-block",cols:[[{field:"name",minWidth:300,title:"菜单名称"},{field:"url",minWidth:100,title:"链接"},{title:"排序",minWidth:140,align:"center",templet:function(h){var g="";g+='<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="sortUp">向上排序</a>';g+='<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="sortDown">向下排序</a>';return g}},{title:"操作",minWidth:200,align:"center",templet:function(i){var h="";h+='<a class="layui-btn layui-btn-normal layui-btn-xs" href="'+i.add_url+'">新增子菜单</a>';h+='<a class="layui-btn layui-btn-normal layui-btn-xs" href="'+i.do_url+'">编辑</a>';var g=parseInt(i.status);switch(g){case 1:h+='<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="off">禁用</a>';break;case 2:h+='<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="on">启用</a>';break}return h}}]],done:function(g){b.closeAll();c.expandAll("#table-block")}})}e();d.on("tool(table-block)",function(i){var h=i.data;var g={id:h.id,event:i.event};switch(g.event){case"sortUp":a("",g,0);break;case"sortDown":a("",g,0);break;case"on":a("确定要启用该菜单吗？",g,1);break;case"off":a("确定要禁用该菜单吗？",g,1);break;default:layError("该按钮尚未绑定事件");break}});function a(i,h,g){ajaxPost($opt_url,h,i,function(){if(g===1){layOk("操作成功");setTimeout(function(){layLoad("数据加载中...");e()},1300)}else{layLoad("数据加载中...");e()}})}f("#openAll").click(function(){c.expandAll("#table-block")});f("#hideAll").click(function(){c.foldAll("#table-block")})});