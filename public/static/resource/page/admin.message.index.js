layui.use(["jquery","layer","table","form"],function(){var d=layui.jquery,a=layui.layer,c=layui.table,b=layui.form;layLoad("数据加载中...");c.render({elem:"#table-block",url:data_url,loading:true,cols:[[{title:"序号",type:"numbers"},{field:"title",title:"消息标题",align:"center",minWidth:200},{field:"type_name",title:"公告类型",align:"center",minWidth:120},{field:"create_time",title:"发布时间",align:"center",minWidth:200},{title:"操作",align:"center",minWidth:180,templet:function(f){var e="";e+='<a class="layui-btn layui-btn-normal layui-btn-xs" href="'+f.do_url+'">编辑</a>';e+='<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="delete">删除</a>';return e}}]],page:true,height:"full-220",response:{statusCode:1},id:"table-block",done:function(e){a.closeAll()}});c.on("tool(table-block)",function(g){var f=g.data;var e={id:f.id,event:g.event};switch(g.event){case"delete":ajaxPost(del_url,e,"确认要删除该公告吗？",function(){layOk("操作成功");setTimeout(function(){layLoad("数据加载中...");c.reload("table-block")},1400)});break}});b.on("submit(table-search)",function(f){var e=f.field;layLoad("数据加载中...");c.reload("table-block",{where:e,page:{curr:1}})})});