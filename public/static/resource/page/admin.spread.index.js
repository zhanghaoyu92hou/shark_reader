layui.use(["jquery","layer","table","form"],function(){var d=layui.jquery,a=layui.layer,c=layui.table,b=layui.form;layLoad("数据加载中...");c.render({elem:"#table-block",url:data_url,loading:true,cols:[[{title:"序号",type:"numbers"},{field:"name",title:"推广名称",align:"center",minWidth:150},{field:"book_name",title:"推广书籍",align:"center",minWidth:120},{field:"chapter_name",title:"推广章节",align:"center",minWidth:120},{field:"sub_str",title:"强制关注",align:"center",minWidth:150},{field:"visitor_num",title:"新增游客",align:"center",minWidth:100},{field:"member_num",title:"关注人数",align:"center",minWidth:100},{field:"create_time",title:"创建时间",align:"center",minWidth:160},{title:"操作",align:"center",minWidth:400,templet:function(f){var e="";e+='<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="copy">复制链接</a>';e+='<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="qrcode">生成二维码</a>';e+='<a class="layui-btn layui-btn-normal layui-btn-xs" href="'+f.do_url+'">编辑</a>';e+='<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="delete">删除</a>';return e}}]],page:true,height:"full-220",response:{statusCode:1},id:"table-block",done:function(e){a.closeAll()}});c.on("tool(table-block)",function(f){var e=f.data;switch(f.event){case"copy":layPage("复制推广链接【"+e.name+"】",e.copy_url,"800px","500px");break;case"qrcode":layPage("生成二维码",e.qrcode_url,"600px","430px;");break;case"delete":ajaxPost(del_url,{id:e.id},"确定要删除该推广链接吗？",function(){layOk("操作成功");setTimeout(function(){layLoad("数据加载中...");c.reload("table-block")},1400)});break}});b.on("submit(table-search)",function(f){var e=f.field;layLoad("数据加载中...");c.reload("table-block",{where:e,page:{curr:1}})})});