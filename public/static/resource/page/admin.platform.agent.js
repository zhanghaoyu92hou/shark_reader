layui.use(["jquery","layer","table","form"],function(){var d=layui.jquery,a=layui.layer,c=layui.table,b=layui.form;layLoad("数据加载中...");c.render({elem:"#table-block",url:$data_url,loading:true,cols:[[{title:"序号",type:"numbers"},{field:"name",title:"代理名称",align:"center",minWidth:150},{field:"login_name",title:"代理账号",align:"center",minWidth:100},{field:"money",title:"账户余额",align:"center",minWidth:120},{field:"ratio",title:"佣金比例",align:"center",minWidth:200},{field:"total_charge",title:"累计充值",align:"center",minWidth:200},{title:"代理状态",align:"center",minWidth:260,templet:function(h){var f=h.status_name+"&nbsp;";var g=parseInt(h.status);switch(g){case 0:f+='<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="pass">通过</a>';f+='<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="fail">不通过</a>';break;case 1:f+='<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="off">禁用</a>';break;case 2:f+='<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="on">启用</a>';break}return f}},{title:"操作",align:"center",minWidth:400,templet:function(h){var f="";var i=parseInt(h.id);var g=parseInt(h.status);if(g===1||g===2){f+='<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="location">进入后台</a>';f+='<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="resetpwd">重置登录密码</a>';f+='<a class="layui-btn layui-btn-normal layui-btn-xs" href="'+h.child_url+'">下级代理</a>';f+='<a class="layui-btn layui-btn-normal layui-btn-xs" href="'+h.do_url+'">编辑</a>';f+='<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="delete">删除</a>'}else{f+="--"}return f}}]],page:true,height:"full-220",response:{statusCode:1},id:"table-block",done:function(f){a.closeAll()}});c.on("tool(table-block)",function(h){var g=h.data;if(h.event==="location"){e(g.id)}else{var f={id:g.id,event:h.event};var i="";switch(h.event){case"on":i="确定要启用该代理吗？";break;case"off":i="确定要禁用该代理吗？";break;case"delete":i="确定要将该删除该代理吗？";break;case"resetpwd":i="确定要将该代理登录密码重置为123456吗？";break;case"pass":i="确定要审核通过该代理吗？";break;case"fail":i="确定要拒绝审核通过该代理吗？";break}if(i){ajaxPost($do_url,f,i,function(){layOk("操作成功");if(h.event!=="resetpwd"){setTimeout(function(){layLoad("数据加载中...");c.reload("table-block")},1400)}})}else{layError("该按钮未绑定事件")}}});function e(g){var f={id:g};ajaxPost($location_url,f,"",function(h){window.open(h.url,"_blank")})}b.on("submit(table-search)",function(g){var f=g.field;layLoad("数据加载中...");c.reload("table-block",{where:f,page:{curr:1}})})});