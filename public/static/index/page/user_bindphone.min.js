var countdown = 0;
function getCode(d) {
    if (countdown !== 0) {
        return false
    }
    countdown = 120;
    var c = /^1[3456789]\d{9}$/;
    var a = $("#phone").val();
    if (!c.test(a)) {
        countdown = 0;
        layMsg("手机号格式有误,请确认");
        return false
    }
    var b = U("Com/sendBindCode");
    $.ajax({
        type: "post",
        url: b,
        data: {
            phone: a
        },
        dataType: "json",
        success: function(e) {
            if (e.msg === "ok") {
                settime(d)
            } else {
                countdown = 0;
                layMsg(e.msg)
            }
        },
        error: function() {
            countdown = 0;
            layMsg("网络错误,请稍后再试")
        }
    })
}
function settime(a) {
    if (countdown == 0) {
        $(a).text("发送验证码");
        return
    } else {
        $(a).text(countdown + "S");
        countdown--
    }
    setTimeout(function() {
        settime(a)
    },
    1000)
}
function doBind() {
    var a = $("#phone").val();
    var b = $("#verify_code").val();
    var e = /^1[3456789]\d{9}$/;
    if (!e.test(a)) {
        layMsg("手机号格式有误");
        return false
    }
    var d = /^\d{6}$/;
    if (!d.test(b)) {
        layMsg("验证码有误");
        return false
    }
    var c = {
        phone: a,
        code: b
    };
    ajaxPost("", c,
    function() {
        layMsg("绑定成功");
        setTimeout(function() {
            var f = U("index");
            window.location.href = f
        },
        1000)
    })
}
$(function() {
    a();
    $(window).resize(function() {
        a()
    });
    function a() {
        var b = $("body").width();
        $(".footerBook").width(b)
    }
});