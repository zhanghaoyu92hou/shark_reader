var page = 1,
is_end = false;
getData();
$(window).scroll(function() {
    var b = $(this).scrollTop();
    var a = $(document).height();
    var c = $(this).height();
    if (b + c == a) {
        if (!is_end) {
            getData()
        }
    }
});
function getData() {
    if (!is_end) {
        is_end = true;
        data["page"] = page;
        ajaxPost("", data,
        function(b) {
            var a = 0;
            if (b) {
                $.each(b,
                function(c, d) {
                    a++;
                    var e = "";
                    e += '<div class="rankList">';
                    if (d.rank < 4) {
                        e += '<div class="rankNumber hotImg">';
                        e += '<img src="/static/index/images/hot' + d.rank + '.png" alt="">';
                        e += "</div>"
                    } else {
                        e += '<div class="rankNumber">' + d.rank + "</div>"
                    }
                    e += '<div class="rankNr">';
                    e += '<div class="cartoonRecommend padding1" >';
                    e += '<div class="recommendList margin0">';
                    e += "<ul>";
                    e += "<li>";
                    e += '<div class="recommendPos">';
                    e += '<div class="recommendHotImg">';
                    e += '<a href="' + d.info_url + '"><img src="' + d.cover + '" alt=""></a>';
                    e += "</div>";
                    e += '<div class="recommendFont">';
                    e += '<h4 class="over"><a href="' + d.info_url + '">' + d.name + "</a></h4>";
                    e += '<p class="over2">';
                    e += '<a href="' + d.info_url + '">' + d.summary + "</a>";
                    e += "</p>";
                    e += '<div class="historyTag">';
                    e += '<a href="javascript:void(0);" class="active_lz">' + d.over_type + "</a>";
                    if (d.category) {
                        e += '<a href="javascript:void(0);">' + d.category + "</a>"
                    }
                    e += "</div>";
                    e += '<div class="historyNumber">';
                    e += "<div>";
                    e += "<span>";
                    e += '<img src="/static/index/images/flame.png" alt="">';
                    e += "<em>" + d.hot_num + "</em>";
                    e += "</span>";
                    e += "</div>";
                    e += "<div>";
                    e += "<span>";
                    e += '<img src="/static/index/images/cartoon_ico2.jpg" alt="">';
                    e += "<em>" + d.total_chapter + "ç« </em>";
                    e += "</span>";
                    e += "</div>";
                    e += "</div>";
                    e += "</div>";
                    e += "</div>";
                    e += "</li>";
                    e += "</ul>";
                    e += "</div>";
                    e += "</div>";
                    e += "</div>";
                    e += "</div>";
                    $(".rankCount").append(e)
                })
            }
            if (a >= 10) {
                page++;
                is_end = false
            }
        })
    }
};