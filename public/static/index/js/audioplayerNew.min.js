(function(d,e,g,b){var c="ontouchstart" in e,j=c?"touchstart":"mousedown",i=c?"touchmove":"mousemove",a=c?"touchend":"mouseup",h=c?"touchcancel":"mouseup",f=function(n){var q=n/3600,l=Math.floor(q),o=n%3600/60,m=Math.floor(o),p=Math.ceil(n%3600%60);if(p>59){p=0;m=Math.ceil(o)}if(m>59){m=0;l=Math.ceil(q)}return(l==0?"":l>0&&l.toString().length<2?"0"+l+":":l+":")+(m.toString().length<2?"0"+m:m)+":"+(p.toString().length<2?"0"+p:p)},k=function(l){var m=g.createElement("audio");return !!(m.canPlayType&&m.canPlayType("audio/"+l.split(".").pop().toLowerCase()+";").replace(/no/,""))};d.fn.audioPlayer=function(o){var o=d.extend({classPrefix:"audioplayer",strPlay:"Play",strPause:"Pause",strVolume:"Volume"},o),l={},n={playPause:"playpause",playing:"playing",stopped:"stopped",time:"time",timeCurrent:"time-current",timeDuration:"time-duration",bar:"bar",barLoaded:"bar-loaded",barPlayed:"bar-played",volume:"volume",volumeButton:"volume-button",volumeAdjust:"volume-adjust",noVolume:"novolume",muted:"muted",mini:"mini"};for(var m in n){l[m]=o.classPrefix+"-"+n[m]}this.each(function(){if(d(this).prop("tagName").toLowerCase()!="audio"){return false}var u=d(this),z=u.attr("src"),x=u.get(0).getAttribute("autoplay"),x=x===""||x==="autoplay"?true:false,I=u.get(0).getAttribute("loop"),I=I===""||I==="loop"?true:false,J=false;if(typeof z==="undefined"){u.find("source").each(function(){z=d(this).attr("src");if(typeof z!=="undefined"&&k(z)){J=true;return false}})}else{if(k(z)){J=true}}var F=d('<div class="'+o.classPrefix+'">'+(J?d("<div>").append(u.eq(0).clone()).html():'<embed src="'+z+'" width="0" height="0" volume="100" autostart="'+x.toString()+'" loop="'+I.toString()+'" />')+'<div class="'+l.playPause+'" title="'+o.strPlay+'"><a href="#">'+o.strPlay+"</a></div></div>"),t=J?F.find("audio"):F.find("embed"),t=t.get(0);if(J){F.find("audio").css({"width":0,"height":0,"visibility":"hidden"});F.append('<div class="'+l.time+" "+l.timeCurrent+'"></div><div class="timeX">/</div><div class="'+l.bar+'"><div class="'+l.barLoaded+'"></div><div class="'+l.barPlayed+'"></div></div><div class="'+l.time+" "+l.timeDuration+'"></div><div class="'+l.volume+'"><div class="'+l.volumeButton+'" title="'+o.strVolume+'"><a href="#">'+o.strVolume+'</a></div><div class="'+l.volumeAdjust+'"><div><div></div></div></div></div>');var y=F.find("."+l.bar),q=F.find("."+l.barPlayed),G=F.find("."+l.barLoaded),C=F.find("."+l.timeCurrent),D=F.find("."+l.timeDuration),v=F.find("."+l.volumeButton),H=F.find("."+l.volumeAdjust+" > div"),s=0,w=function(K){theRealEvent=c?K.originalEvent.touches[0]:K;t.currentTime=Math.round((t.duration*(theRealEvent.pageX-y.offset().left))/y.width())},r=function(K){theRealEvent=c?K.originalEvent.touches[0]:K;t.volume=Math.abs((theRealEvent.pageY-(H.offset().top+H.height()))/H.height())},B=function(){var K=setInterval(function(){if(t.buffered.length<1){return true}G.width((t.buffered.end(0)/t.duration)*100+"%");if(Math.floor(t.buffered.end(0))>=Math.floor(t.duration)){clearInterval(K)}},100)};var E=t.volume,A=t.volume=0.111;if(Math.round(t.volume*1000)/1000==A){t.volume=E}else{F.addClass(l.noVolume)}C.html(f(0));t.addEventListener("loadeddata",function(){B();D.html(d.isNumeric(t.duration)?f(t.duration):"&hellip;");H.find("div").height(t.volume*100+"%");s=t.volume});function p(L){var K=g.getElementById(L);g.addEventListener("WeixinJSBridgeReady",function(){D.html(f(t.duration))},false)}setTimeout(function(){var K=f(t.duration);D.html(K);p("MusicAudio")},300);t.addEventListener("timeupdate",function(){C.html(f(t.currentTime));q.width((t.currentTime/t.duration)*100+"%")});t.addEventListener("volumechange",function(){H.find("div").height(t.volume*100+"%");if(t.volume>0&&F.hasClass(l.muted)){F.removeClass(l.muted)}if(t.volume<=0&&!F.hasClass(l.muted)){F.addClass(l.muted)}});t.addEventListener("ended",function(){F.removeClass(l.playing).addClass(l.stopped);d(".audioplayer-playpause").removeClass("audioplayer-playpause2");d(".bfAudio>img").attr("src","/static/index/images/pause_w.png");d(".bfAudio>img").removeClass("active");d(".bfAudio").removeClass("active")});y.on(j,function(K){w(K);y.on(i,function(L){w(L)})}).on(h,function(){y.unbind(i)});v.on("click",function(){if(F.hasClass(l.muted)){F.removeClass(l.muted);t.volume=s}else{F.addClass(l.muted);s=t.volume;t.volume=0}return false});H.on(j,function(K){r(K);H.on(i,function(L){r(L)})}).on(h,function(){H.unbind(i)})}else{F.addClass(l.mini)}F.addClass(x?l.playing:l.stopped);F.find("."+l.playPause).on("click",function(){if(F.hasClass(l.playing)){d(this).attr("title",o.strPlay).find("a").html(o.strPlay);F.removeClass(l.playing).addClass(l.stopped);J?t.pause():t.Stop();d(".audioplayer-playpause").removeClass("audioplayer-playpause2");d(".bfAudio>img").attr("src","/static/index/images/pause_w.png");d(".bfAudio>img").removeClass("active")}else{d(this).attr("title",o.strPause).find("a").html(o.strPause);F.addClass(l.playing).removeClass(l.stopped);J?t.play():t.Play();d(".audioplayer-playpause").addClass("audioplayer-playpause2");
d(".bfAudio>img").attr("src","/static/index/images/play_w.png");d(".bfAudio>img").addClass("active");d(".bfAudio").addClass("active")}return false});u.replaceWith(F)});return this}})(jQuery,window,document);